<div class="container">

    <button type="button" class="btn btn-primary" (click)="openModal(template)">Book Now</button>
    
   <ng-template #template>
     <div class="modal-header">
       <h4 class="modal-title pull-left">Booking</h4>
       <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
         <span aria-hidden="true">&times;</span>
       </button>
     </div>
     <div class="jumbotron">
        <div class="col-lg-12 col-12 text-danger">
          <h1 class="text-center">Booking Form</h1>
          <hr>
          <form novalidate #f="ngForm" (ngSubmit)="onSubmit(f)">
            <div class="form-group ">
              <label>Name</label>
              <input type="text" class="form-control" [(ngModel)] ="booking.name" name="name" #bookingName="ngModel" minlength="2" required>
              <div *ngIf="bookingName.errors?.required && bookingName.touched" class="alert alert-danger">Name is Required</div>
              <div *ngIf="bookingName.errors?.minlength && bookingName.touched" class="alert alert-danger">Name is not valid</div>
            </div>
            <div class="form-group">
              <label>Location of Event</label>
              <input type="text" class="form-control" [(ngModel)] ="booking.location" name="location" #bookingLocation="ngModel" required>
              <div *ngIf="bookingLocation.errors?.required && bookingLocation.touched" class="alert alert-danger">Location is Required</div>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" class="form-control" [(ngModel)] ="booking.email" name="email" placeholder="you@example.com" #bookingEmail="ngModel" required pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$">
              <div *ngIf="bookingEmail.errors?.required && bookingEmail.touched" class="alert alert-danger">Email is Required</div>
              <div  *ngIf="bookingEmail.errors && bookingEmail.errors.pattern" class="alert alert-danger">
                  Please enter a valid Email Address
              </div>
            </div>
            <div class="form-group">
              <label>Date</label>
              <input type="date" class="form-control" [(ngModel)] ="booking.date" name="date" #bookingDate="ngModel" required>
              <div *ngIf="bookingDate.errors?.required && bookingDate.touched" class="alert alert-danger">Date is Required</div>
            </div>
            <br>
            <div class="form-group">
              <label class="mr-sm-2" for="inlineFormCustomSelect">Event Type</label>
              <br>
              <select class="custom-select mb-2 mr-sm-2 mb-sm-0" [(ngModel)] = "booking.event" name="event" id="inlineFormCustomSelect" #bookingEvent="ngModel" required>
                <option selected>Choose...</option>
                <option value="Small Venue">Small Venue 300 or less</option>
                <option value="Medium Venue">Medium Venue 1000 or less</option>
                <option value="Stadium Venue">Stadium Venue 1000 or more</option>
                <option value="Festival">Festival</option>
                <option value="Wedding">Wedding</option>
              </select>
              <div *ngIf="bookingEvent.errors?.required && bookingEvent.touched" class="alert alert-danger">Event is Required</div>
            </div>
            <br>
            <input type="submit" class="btn btn-success" (click)="openModal2(templateNested)" value="Submit">
            

            <ng-template #templateNested>
                <div class="modal-header">
                  <h4 class="modal-title pull-left">Booking Information</h4>
                  <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef2.hide()">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <br>
                </div>
                <div class="text-center">
                  <h1>{{ validation }}</h1>
                  <p class="success">{{ successMSG }}</p>
                </div>
                <div *ngIf="bookingInfo" class="container">
                    <div class="row">
                      <div class="col-12 col-lg-12" style="width:100%">
                        <ul class="list-group">
                          <li class="list-group-item" *ngFor="let location of booking.locations" >
                              <h3>Location:  </h3>
                              <h4>&nbsp; {{ location }}</h4>
                          </li>
                        </ul>
                      </div>
                      <div class="col-12 col-lg-12" style="width:100%">
                          <ul class="list-group">
                            <li class="list-group-item" *ngFor="let date of booking.dates">
                              <h3>Venue Type:</h3>
                              <h4>&nbsp; {{ booking.event }}</h4>
                            </li>
                          </ul>
                        </div>  
                      <div class="col-12 col-lg-12" style="width:100%">
                        <ul class="list-group">
                          <li class="list-group-item" *ngFor="let date of booking.dates">
                            <h3>Date:</h3>
                            <h4>&nbsp; {{ date }}</h4>
                          </li>
                        </ul>
                      </div>
                      <div class="col-12 col-lg-12" style="width:100%">
                          <ul class="list-group">
                            <li class="list-group-item" *ngFor="let date of booking.dates">
                              <h3>Price: </h3>
                              <h4>&nbsp; ${{ booking.price }}</h4>
                            </li>
                          </ul>
                        </div>
                    </div>
                    <br><br>
                    <div class="col-12 col-lg-12"*ngIf="finish">
                      <a link="#" routerLink="/contact">
                        <button *ngIf="modalRef" type="button" class="btn btn-danger" (click)="closeAllModal()" >Finished</button>
                      </a>
                    </div>
                  </div>
                  <br><br>
              </ng-template>

          </form>
      </div>
    </div>
    <hr>
    
    
   </ng-template>

    

  <br><br>